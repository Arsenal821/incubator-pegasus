# class_name 必须和文件名保持一致
- class_name: SkvMetaServerAliveWorker
  # 描述，尽量详细
  description: "check skv meta_server alive, if not log output down reason"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 3
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 60
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 60
  # level 优先级 A -> B -> C
  priority_level: A

# class_name 必须和文件名保持一致
- class_name: SkvReplicaServerAliveWorker
  # 描述，尽量详细
  description: "check skv replica_server alive, if not log output down reason"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 3
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 60
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 60
  # level 优先级 A -> B -> C
  priority_level: A

- class_name: SkvCheckUnhealthyPartitionWorker
  # 描述，尽量详细
  description: "check cluster table partition healthy"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 3
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 120
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 120
  # 虽然 partition unhealthy 势必造成后面p99过高等问题 但是也可以通过后面的检查排除一些配置问题或者大分片问题
  # 因此这个检查还是要跑的
  priority_level: B

# class_name 必须和文件名保持一致
- class_name: CheckSkvVersionWorker
  # 描述，尽量详细
  description: "check if current skv backend contains serious bug"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 10
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 10
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 10
  # level 优先级 A -> B -> C
  priority_level: B

# class_name 必须和文件名保持一致
- class_name: SkvBalanceWorker
  # 描述，尽量详细
  description: "check skv cluster data balance, when balance_operation_count bigger than 0, suggest balance"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 3
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 3
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 600
  # level 优先级 A -> B -> C
  priority_level: B
- class_name: SkvFillClientConfigWorker
  # 描述，尽量详细
  description: "fill skv client config for skv"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 3
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 5
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 5
  # level 优先级 A -> B -> C
  priority_level: B

# class_name 必须和文件名保持一致
- class_name: CheckMemoryConfigWorker
  # 描述，尽量详细
  description: "check memory config(block_cache/write_buffer) is set properly"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 10
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 10
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 10
  # level 优先级 A -> B -> C
  priority_level: B

# class_name 必须和文件名保持一致
- class_name: CheckPartitionNumWorker
  # 描述，尽量详细
  description: "check table partition number is set properly"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 10
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 5
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 5
  # level 优先级 A -> B -> C
  priority_level: B

- class_name: SkvFillServerConfigWorker
  # 描述，尽量详细
  description: "fill skv server config for skv"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 3
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 5
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 5
  # level 优先级 A -> B -> C
  priority_level: B

- class_name: SkvCheckP99Worker
  # 描述，尽量详细
  description: "check skv related p99 number"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 5
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 10
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 10
  # level 优先级 A -> B -> C
  priority_level: B

- class_name: CheckReplicaServerLogWorker
  # 描述，尽量详细
  description: "check replica server error log automatically to see if there are known issues"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 600
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 10
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 10
  # level 优先级 A -> B -> C
  priority_level: C

- class_name: SkvCheckShrededSstFilesWorker
  # 描述，尽量详细
  description: "check possible table relate shreded sst file"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 60
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 120
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 20
  # level 优先级 A -> B -> C
  priority_level: C

- class_name: CheckTableReplicaCountWorker
  # 描述，尽量详细
  description: "check if table replica count is 3 in cluster"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 60
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 60
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 5
  # level 优先级 A -> B -> C
  priority_level: B

- class_name: CheckClusterHardwareInfoWorker
  # 描述，尽量详细
  description: "show all resources in skv cluster"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 30
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 30
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 5
  # level 优先级 A -> B -> C
  priority_level: C

- class_name: CheckTableEnvsWorker
  # 描述，尽量详细
  description: "Check whether the environment variables of all tables are reasonable"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 30
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 30
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 5
  # level 优先级 A -> B -> C
  priority_level: B

- class_name: CheckSaasEnvStandardWorker
  # 描述，尽量详细
  description: "check whether disk_num in each group is standardized and whether partitions_num is reasonable"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 30
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 30
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 5
  # level 优先级 A -> B -> C
  priority_level: B

- class_name: CheckRocksdbLogWorker
  # 描述，尽量详细
  description: "check whether the rocksdb log is normal, such as insufficient write buffer"
  # 检测超时时间(执行 is_state_abnormal 的超时时间)，单位 s
  check_timeout: 100
  # 执行诊断任务的最大超时时间（执行 diagnose 的超时时间），单位 s
  diagnose_timeout: 100
  # 执行修复任务的最大超时时间（执行 repair 的超时时间），单位 s
  repair_timeout: 5
  # level 优先级 A -> B -> C
  priority_level: C
